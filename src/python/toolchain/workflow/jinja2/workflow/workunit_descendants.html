{#
Copyright 2017 Toolchain Labs, Inc. All rights reserved.
Licensed under the Apache License, Version 2.0 (see LICENSE).
#}

{% extends "workflow/base.html" %}

{% block css %}
  {{ super() }}
  <link rel="stylesheet" href="http://www.orangehilldev.com/jstree-bootstrap-theme/demo/assets/dist/themes/proton/style.css">
{% endblock css %}

{% block content %}
  <h2>Created Descendants Tree for {{ object.payload_ctype.model }} {{ object.pk }}</h2>
  <div class="workunit-context-links-container">
    <a href="{{ views_links.workunit_status_url }}" class="workunit-context-links">Status</a>
  </div>
  <div class="workunit-tree-container">
    <div id="workunit-tree" class="workunit-tree"></div>
  </div>

{% endblock content %}

{% block js %}
  {{ super() }}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>
  <script src="{{ static('workflow/js/workunit_tree.js') }}"></script>
  <script>
    $(function() {
      toolchain.workflow.initWorkunitTree('#workunit-tree', '{{ views_links.workunit_created_by_tree_data }}',
      '{{ object.pk }}');
    });
  </script>
{% endblock js %}
